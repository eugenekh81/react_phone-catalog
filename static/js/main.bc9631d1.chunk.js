(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],Array(31).concat([function(e,t,c){},,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(26),a=c.n(n),s=c(6),i=c(4),r=(c(31),c(1)),l=c.n(r),o=c(7),u=c.n(o),d=c(20),j=c(9),b=c(2),m=c(0),h=l.a.createContext({cart:[],handleCart:function(){},handleProductQuantity:function(){}}),O=function(e){var t=e.children,c=Object(r.useState)([]),n=Object(b.a)(c,2),a=n[0],s=n[1],i=localStorage.getItem("cart");Object(r.useEffect)((function(){i&&s(JSON.parse(i))}),[]);return Object(m.jsx)(h.Provider,{value:{cart:a,handleCart:function(e){var t=e.id;if(a.some((function(e){return e.id===t})))s((function(e){return e.filter((function(e){return e.id!==t}))})),localStorage.setItem("cart",JSON.stringify(a.filter((function(e){return e.id!==t}))));else{var c={id:t,product:e,quantity:1};s((function(e){return[].concat(Object(j.a)(e),[c])})),localStorage.setItem("cart",JSON.stringify([].concat(Object(j.a)(a),[c])))}},handleProductQuantity:function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"increase";s((function(n){return n.map((function(n){switch(c){case"increase":return e===n.id?Object(d.a)(Object(d.a)({},n),{},{quantity:t+1}):n;case"decrease":return e===n.id?Object(d.a)(Object(d.a)({},n),{},{quantity:t-1}):n;default:return n}}))}))}},children:t})},_=c(8),p=c(5),f=c.n(p),x=l.a.createContext({favs:[],handleFavs:function(){}}),v=function(e){var t=e.children,c=Object(r.useState)([]),n=Object(b.a)(c,2),a=n[0],s=n[1],i=localStorage.getItem("favorites");Object(r.useEffect)((function(){i&&s(JSON.parse(i))}),[]);var l=function(){var e=Object(_.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.includes(t)?(s((function(e){return e.filter((function(e){return e!==t}))})),localStorage.setItem("favorites",JSON.stringify(a.filter((function(e){return e!==t}))))):(s((function(e){return[].concat(Object(j.a)(e),[t])})),localStorage.setItem("favorites",JSON.stringify([].concat(Object(j.a)(a),[t]))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(x.Provider,{value:{favs:a,handleFavs:l},children:t})},g=(c(34),function(){var e=Object(i.l)().pathname,t=Object(s.d)(),c=Object(b.a)(t,2),n=c[0],a=c[1],l=Object(r.useState)(n.get("query")||""),o=Object(b.a)(l,2),u=o[0],d=o[1],j=Object(r.useState)(""),h=Object(b.a)(j,2),O=h[0],_=h[1],p=Object(r.useCallback)(function(e,t){var c;return function(){clearTimeout(c);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];c=setTimeout.apply(void 0,[e,t].concat(a))}}(_,1e3),[]);return Object(r.useEffect)((function(){O?n.set("query",O):n.delete("query"),a(n)}),[O]),Object(m.jsxs)("label",{className:"search",children:[Object(m.jsx)("input",{type:"text",className:"search__input",placeholder:"Search in ".concat(e.slice(1),"..."),value:u,onChange:function(e){d(e.target.value),p(e.target.value)}}),u&&Object(m.jsx)("button",{"aria-label":"searchDeleteBtn",className:"search__delete-button","data-cy":"searchDelete",type:"button",onClick:function(){d(""),_("")}})]})}),N=(c(35),function(){var e=Object(i.l)(),t=e.pathname,c=e.search,n=Object(r.useContext)(x).favs,a=Object(r.useContext)(h).cart,l="/phones"===t||"/tablets"===t||"/accessories"===t||"/favorites"===t;return Object(m.jsxs)("header",{className:"header",children:[Object(m.jsxs)("div",{className:"header__left",children:[Object(m.jsx)(s.b,{to:"/",className:"logo",children:Object(m.jsx)("img",{src:"img/main-logo/logo.svg",alt:""})}),Object(m.jsx)("nav",{className:"nav",children:Object(m.jsxs)("ul",{className:"nav__list",children:[Object(m.jsx)("li",{className:"nav__item",children:Object(m.jsx)(s.c,{to:"/",className:function(e){var t=e.isActive;return u()("nav__link",{"nav__link--active":t})},children:"Home"})}),Object(m.jsx)("li",{className:"nav__item",children:Object(m.jsx)(s.c,{to:{pathname:"/phones",search:c},className:function(e){var t=e.isActive;return u()("nav__link",{"nav__link--active":t})},children:"Phones"})}),Object(m.jsx)("li",{className:"nav__item",children:Object(m.jsx)(s.c,{to:{pathname:"/tablets",search:c},className:function(e){var t=e.isActive;return u()("nav__link",{"nav__link--active":t})},children:"Tablets"})}),Object(m.jsx)("li",{className:"nav__item",children:Object(m.jsx)(s.c,{to:{pathname:"/accessories",search:c},className:function(e){var t=e.isActive;return u()("nav__link",{"nav__link--active":t})},children:"Accessories"})})]})})]}),Object(m.jsxs)("div",{className:"header__right",children:[l&&Object(m.jsx)(g,{}),Object(m.jsxs)("div",{className:"header__button",children:[Object(m.jsx)(s.c,{to:"/favorites",className:function(e){var t=e.isActive;return u()("header__button--link","header__button--favorites",{"header__button--active":t})}}),n.length>0&&Object(m.jsx)("span",{className:"header__button--count",children:n.length})]}),Object(m.jsxs)("div",{className:"header__button",children:[Object(m.jsx)(s.c,{to:"/cart",className:function(e){var t=e.isActive;return u()("header__button--link","header__button--cart",{"header__button--active":t})}}),a.length>0&&Object(m.jsx)("span",{className:"header__button--count",children:a.length})]})]})]})}),y=(c(36),function(){return Object(m.jsx)("footer",{className:"footer",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"footer__content",children:[Object(m.jsx)(s.b,{to:"/",className:"logo",children:Object(m.jsx)("img",{src:"img/main-logo/logo.svg",alt:""})}),Object(m.jsx)("nav",{className:"nav",children:Object(m.jsxs)("ul",{className:"nav__list",children:[Object(m.jsx)("li",{className:"nav__item",children:Object(m.jsx)("a",{href:"https://github.com/eugenekh81/react_phone-catalog",className:"nav__link",target:"_blank",rel:"noreferrer",children:"Github"})}),Object(m.jsx)("li",{className:"nav__item",children:Object(m.jsx)("a",{href:"https://github.com/eugenekh81",className:"nav__link",target:"_blank",rel:"noreferrer",children:"Contacts"})}),Object(m.jsx)("li",{className:"nav__item",children:Object(m.jsx)("a",{href:"https://github.com/eugenekh81",className:"nav__link",target:"_blank",rel:"noreferrer",children:"Rights"})})]})}),Object(m.jsx)("div",{className:"footer__buttons buttons",children:Object(m.jsxs)("label",{className:"buttons__text",children:["Back to top",Object(m.jsx)("input",{"aria-label":"backToTopBtn",type:"button",className:"button button--up",onClick:function(){return window.scrollTo({top:0,left:0,behavior:"smooth"})}})]})})]})})})}),k=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(N,{}),Object(m.jsx)("main",{className:"page",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsx)(i.b,{})})}),Object(m.jsx)(y,{})]})},S=(c(37),function(){return Object(m.jsx)("div",{className:"Loader","data-cy":"Loader",children:Object(m.jsx)("div",{className:"Loader__content"})})}),C="https://mate-academy.github.io/react_phone-catalog/api/products",w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".json";return fetch("".concat(C).concat(e)).then((function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText));return e.json()}))},B=function(){var e=Object(_.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w("/".concat(t,".json")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=(c(38),function(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(),l=Object(b.a)(a,2),o=l[0],d=l[1],j=Object(r.useState)(!1),h=Object(b.a)(j,2),O=h[0],_=h[1],p=Object(i.l)().pathname,f=p.slice(1).split("/"),x="".concat(f[0][0].toLocaleUpperCase()).concat(f[0].slice(1)),v=f[1]||null;return Object(r.useEffect)((function(){v&&(n(!0),B(v).then(d).catch((function(){return _(!0)})).finally((function(){return n(!1)})))}),[]),c?Object(m.jsx)(S,{}):O?Object(m.jsx)("p",{children:"Oops, something went wrong..."}):Object(m.jsxs)("div",{className:"breadcrumbs","data-cy":"breadCrumbs",children:[Object(m.jsx)(s.b,{to:"/",className:"breadcrumbs__home"}),Object(m.jsx)("div",{className:"breadcrumbs__arrow"}),Object(m.jsx)("div",{className:"breadcrumbs__category",children:v?Object(m.jsx)(s.b,{to:v?"..":p,className:u()("breadcrumbs__link",{"breadcrumbs__link--active":v}),children:x}):Object(m.jsx)("div",{className:"breadcrumbs__link",children:x})}),v&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"breadcrumbs__arrow"}),Object(m.jsx)("div",{className:"breadcrumbs__product-name",children:null===o||void 0===o?void 0:o.name})]})]})}),T=function(){var e=Object(i.l)().pathname;return Object(m.jsx)("div",{className:"no-results",children:Object(m.jsx)("h1",{className:"no-results__title",children:"No ".concat(e.slice(1)," found...")})})},P=(c(39),function(e){for(var t=e.totalProducts,c=Object(s.d)(),n=Object(b.a)(c,2),a=n[0],i=n[1],l=a.get("page")||"1",o=a.get("perPage")||"All",d="All"!==o?Math.floor(t/+o):1,j=[],h=1;h<=d;h+=1)j.push(h);return Object(r.useEffect)((function(){"1"===l?a.delete("page"):a.set("page",l),i(a)}),[l]),Object(m.jsxs)("div",{className:"pagination","data-cy":"pagination",children:[Object(m.jsx)("button",{"aria-label":"paginationBtnLeft",type:"button","data-cy":"paginationLeft",className:" pagination__button pagination__button--left ",onClick:function(){a.set("page","".concat(+l-1)),i(a)},disabled:1===+l}),Object(m.jsx)("div",{className:"pagination__pages",children:j.map((function(e){return Object(m.jsx)("button",{"aria-label":"paginationBtnLeft",type:"button",className:u()("pagination__page",{"pagination__page--active":e===+l}),onClick:function(){a.set("page","".concat(e)),i(a)},children:e},e)}))}),Object(m.jsx)("button",{"aria-label":"paginationBtnLeft",type:"button","data-cy":"paginationRight",className:" pagination__button pagination__button--right ",onClick:function(){a.set("page","".concat(+l+1)),i(a)},disabled:+l===d})]})}),E=(c(40),function(e){var t=e.product,c=t.id,n=t.name,a=t.type,l=t.price,o=t.discount,d=t.imageUrl,j=t.ram,b=t.screen,O=t.capacity,_=Object(i.p)().productId,p=Object(i.l)().pathname,f="/"===p||"/favorites"===p||!_?"../".concat(a,"s/").concat(c):"../".concat(c),v=Object(r.useContext)(x),g=v.favs,N=v.handleFavs,y=Object(r.useContext)(h),k=y.cart,S=y.handleCart,C=o>0?l*(1-o/100):l,w=g.includes(c),B=k.some((function(e){return e.id===t.id}));return Object(m.jsxs)("div",{className:"product-card",children:[Object(m.jsx)(s.b,{to:f,className:"product-card__image-container",children:Object(m.jsx)("img",{src:d,alt:"phone",className:"product-card__image"})}),Object(m.jsx)(s.b,{to:f,className:"product-card__title--link",children:Object(m.jsx)("h2",{className:"product-card__title",children:n})}),Object(m.jsxs)("div",{className:"product-card__prices",children:[Object(m.jsx)("div",{className:"product-card__current-price",children:"$".concat(C)}),Object(m.jsx)("div",{className:"product-card__old-price",children:o>0&&"$".concat(l)})]}),Object(m.jsx)("div",{className:"product-card__divider"}),Object(m.jsxs)("div",{className:"product-card__specs",children:[Object(m.jsxs)("div",{className:"spec",children:[Object(m.jsx)("p",{className:"spec__name",children:"Screen"}),Object(m.jsx)("p",{className:"spec__value",children:b})]}),Object(m.jsxs)("div",{className:"spec",children:[Object(m.jsx)("p",{className:"spec__name",children:"Capacity"}),Object(m.jsx)("p",{className:"spec__value",children:O})]}),Object(m.jsxs)("div",{className:"spec",children:[Object(m.jsx)("p",{className:"spec__name",children:"RAM"}),Object(m.jsx)("p",{className:"spec__value",children:j})]})]}),Object(m.jsxs)("div",{className:"product-card__buttons",children:[Object(m.jsx)("button",{"aria-label":"handleCartBtn",type:"button",className:u()("product-card__button","product-card__button--add-to-cart",{"product-card__button--add-to-cart_added":B}),onClick:function(){return S(t)},children:"Add".concat(B?"ed":""," to cart")}),Object(m.jsx)("button",{"aria-label":"addToFavsBtn",type:"button","data-cy":"addToFavorite",className:u()("product-card__button","product-card__button--add-to-favs",{"product-card__button--add-to-favs_added":w}),onClick:function(){return N(c)}})]})]})}),F=(c(41),function(e){var t=e.totalProducts,c=e.products,n=Object(s.d)(),a=Object(b.a)(n,1)[0].get("perPage")||"All",i="All"!==a&&t/+a>1;return Object(m.jsxs)("section",{className:"page__section products-list","data-cy":"productList",children:[Object(m.jsx)("div",{className:"products-list__list",children:c.map((function(e){return Object(m.jsx)(E,{product:e},e.id)}))}),i&&Object(m.jsx)("div",{className:"products-list__pagination",children:Object(m.jsx)(P,{totalProducts:t})})]})}),I=function(e){var t=e.filterTitle,c=e.filterOptions,n=e.currentOption,a=e.onSelect,s=Object(r.useState)(!1),i=Object(b.a)(s,2),l=i[0],o=i[1],d=Object(r.useRef)(null),j=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(j.current&&d.current){var e=d.current.offsetHeight,t=j.current.style;l?(t.height="".concat(4*e,"px"),t.borderBottomWidth="1px"):(t.height="0",t.borderBottomWidth="0")}}),[l]),Object(m.jsxs)("div",{className:"select",children:[Object(m.jsx)("div",{className:"select__title",children:t}),Object(m.jsx)("button",{"aria-label":"selectBtn",type:"button",className:u()("select__field","select__field--sort",{"select__field--open":l}),ref:d,onClick:function(){return o((function(e){return!e}))},children:n}),Object(m.jsx)("div",{className:"select__dropdown-list",onMouseLeave:function(){return o(!1)},children:Object(m.jsx)("div",{className:"dropdown-list",ref:j,children:c.map((function(e){return Object(m.jsx)("button",{"aria-label":"optionBtn",type:"button",className:" dropdown-list__item ",onClick:function(){o(!1),a(e)},children:e},e)}))})})]})},q=(c(42),function(e){var t=e.title,c=e.products,n=Object(r.useState)(c),a=Object(b.a)(n,2),l=a[0],o=a[1],u=Object(i.l)().pathname,d=Object(s.d)(),j=Object(b.a)(d,2),h=j[0],O=j[1],_=Object(r.useState)(h.get("perPage")||"All"),p=Object(b.a)(_,2),f=p[0],x=p[1],v=Object(r.useState)(h.get("sortBy")||"Newest"),g=Object(b.a)(v,2),N=g[0],y=g[1],k=h.get("page")||"1",S=Object(r.useState)(0),C=Object(b.a)(S,2),w=C[0],B=C[1],P=Object(r.useState)(c.length),E=Object(b.a)(P,2),q=E[0],L=E[1];Object(r.useEffect)((function(){o(c)}),[c]),Object(r.useEffect)((function(){"Newest"===N?h.delete("sortBy"):h.set("sortBy",N),"All"===f?h.delete("perPage"):h.set("perPage",f),y(N),x(f),"1"===k?h.delete("page"):h.set("page",k),"All"!==f&&(B(+k*+f-+f),L(+k*+f)),O(h)}),[N,f,k]),Object(r.useEffect)((function(){h.delete("page"),O(h),"All"===f&&(B(0),L(c.length))}),[f]),Object(r.useEffect)((function(){switch(N){case"Oldest":return o((function(e){return e.sort((function(e,t){return t.age-e.age}))}));case"Alphabetically":return o((function(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)}))}));case"Cheapest":return o((function(e){return e.sort((function(e,t){return e.price-t.price}))}));default:return o((function(e){return e.sort((function(e,t){return e.age-t.age}))}))}}),[N]);var R={"Sort by":["Newest","Oldest","Alphabetically","Cheapest"],"Items on page":["4","8","16","All"]};if(0===c.length)return Object(m.jsx)(T,{});var D=l.slice(w,q),J=h.get("query");if(J){var M=c.filter((function(e){return e.name.toLowerCase().includes(J.toLowerCase())}));return 0===M.length?Object(m.jsx)("h1",{children:"No search results"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"page__search-results medium-text",children:"".concat(M.length," results")}),Object(m.jsx)(F,{totalProducts:M.length,products:M})]})}return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"page__breadcrumbs",children:Object(m.jsx)(A,{})}),Object(m.jsx)("h1",{className:"product-page__title page__title",children:t}),Object(m.jsx)("div",{className:"product-page__models-count",children:"".concat(c.length," models")}),"/favorites"!==u&&Object(m.jsxs)("div",{className:"product-page__filters",children:[Object(m.jsx)(I,{filterTitle:Object.entries(R)[0][0],filterOptions:Object.entries(R)[0][1],currentOption:N,onSelect:y}),Object(m.jsx)(I,{filterTitle:Object.entries(R)[1][0],filterOptions:Object.entries(R)[1][1],currentOption:f,onSelect:x})]}),Object(m.jsx)("div",{className:"product-page__products-list",children:Object(m.jsx)(F,{totalProducts:c.length,products:D})})]})}),L=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!1),s=Object(b.a)(a,2),i=s[0],l=s[1],o=Object(r.useState)(!1),u=Object(b.a)(o,2),d=u[0],j=u[1];Object(r.useEffect)((function(){j(!1),l(!0),w().then((function(e){return e.filter((function(e){return"accessory"===e.type}))})).then(n).catch((function(){return j(!0)})).finally((function(){l(!1)}))}),[]);var h=!i&&!d;return Object(m.jsxs)(m.Fragment,{children:[i&&Object(m.jsx)("div",{className:"page__loader-container",children:Object(m.jsx)(S,{})}),h&&Object(m.jsx)(q,{title:"Accessories",products:c})]})},R=(c(43),function(){var e=Object(i.n)();return Object(m.jsxs)("button",{"aria-label":"backBtn","data-cy":"backButton",type:"button",className:"back-button",onClick:function(){return e(-1)},children:[Object(m.jsx)("img",{src:"img/icons/arrows/arrow-left--active.svg",alt:""}),Object(m.jsx)("div",{className:"back-button__text",children:"Back"})]})}),D=(c(44),function(e){var t=e.cart,c=Object(r.useState)(!1),n=Object(b.a)(c,2),a=n[0],s=n[1];a&&setTimeout((function(){return s(!1)}),2e3);var i=t.reduce((function(e,t){var c=t.product,n=t.quantity,a=c.price,s=c.discount;return e+(s?a*((100-s)/100):a)*n}),0);return Object(m.jsxs)("div",{className:"checkout",children:[Object(m.jsxs)("div",{className:"checkout__content",children:[Object(m.jsx)("div",{className:"checkout__price",children:"$".concat(i)}),Object(m.jsx)("div",{className:"checkout__total-items",children:"Total for ".concat(t.length," items")}),Object(m.jsx)("div",{className:"checkout__divider"}),Object(m.jsx)("button",{type:"button",className:"checkout__button",onClick:function(){return s(!0)},children:"Checkout"})]}),Object(m.jsx)("div",{className:u()("checkout__error",{"checkout__error--shown":a}),children:"We are sorry, but this feature is not implemented yet"})]})}),J=(c(45),function(e){var t=e.product,c=e.quantity,n=Object(r.useContext)(h),a=n.handleCart,i=n.handleProductQuantity,l=t.id,o=t.name,u=t.type,d=t.imageUrl,j=t.discount,b=t.price,O=j?b*((100-j)/100):b;return Object(m.jsxs)("li",{className:"cart-item",children:[Object(m.jsxs)("div",{className:"cart-item__info",children:[Object(m.jsx)("button",{"aria-label":"deleteBtn","data-cy":"cartDeleteButton",type:"button",className:"cart-item__delete-button",onClick:function(){a(t)}}),Object(m.jsx)("div",{className:"cart-item__img-container",children:Object(m.jsx)("img",{src:d,alt:"",className:"cart-item__img"})}),Object(m.jsx)(s.b,{to:"../".concat(u,"s/").concat(l),className:"cart-item__link",children:o})]}),Object(m.jsxs)("div",{className:"cart-item__price-info",children:[Object(m.jsxs)("div",{className:"cart-item__counter",children:[Object(m.jsx)("button",{"aria-label":"quantityDecr",type:"button",disabled:1===c,className:" cart-item__button cart-item__button--decrease button ",onClick:function(){i(l,c,"decrease")}}),Object(m.jsx)("div",{className:"cart-item__quantity","data-cy":"productQuantity",children:c}),Object(m.jsx)("button",{"aria-label":"quantityIncr",type:"button",className:" cart-item__button cart-item__button--increase button ",onClick:function(){return i(l,c,"increase")}})]}),Object(m.jsx)("div",{className:"cart-item__price",children:"$".concat(O*c)})]})]})}),M=(c(46),function(){var e=Object(r.useContext)(h).cart;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:" page__back-button page__back-button--cart-page ",children:Object(m.jsx)(R,{})}),0===e.length?Object(m.jsx)("h1",{children:"Your cart is empty..."}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{className:"page__title page__title--cart-page",children:"Cart"}),Object(m.jsxs)("div",{className:"page__cart-items cart-items",children:[Object(m.jsx)("ul",{className:"cart-items__list",children:e.map((function(e){var t=e.id,c=e.product,n=e.quantity;return Object(m.jsx)(J,{product:c,quantity:n},t)}))}),Object(m.jsx)("div",{className:"cart-items__checkout",children:Object(m.jsx)(D,{cart:e})})]})]})]})}),$=function(){var e=Object(_.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(r.useContext)(x).favs,t=Object(r.useState)([]),c=Object(b.a)(t,2),n=c[0],a=c[1],s=Object(r.useState)(!1),i=Object(b.a)(s,2),l=i[0],o=i[1],u=Object(r.useState)(!1),d=Object(b.a)(u,2),h=d[0],O=d[1];Object(r.useEffect)((function(){O(!1),o(!0),$().then(a).catch((function(){return O(!0)})).finally((function(){return o(!1)}))}),[]);var _=!l&&!h,p=Object(j.a)(n).filter((function(t){var c=t.id;return e.includes(c)}));return Object(m.jsxs)(m.Fragment,{children:[l&&Object(m.jsx)("div",{className:"page__loader-container",children:Object(m.jsx)(S,{})}),_&&Object(m.jsx)(q,{title:"Favorites",products:p})]})},Q=(c(47),function(e){var t=e.path,c=e.name,n=e.type,a=e.models;return Object(m.jsxs)("div",{className:"category-nav__container",children:[Object(m.jsx)(s.b,{to:t,children:Object(m.jsx)("div",{className:"\n            category-nav__item\n            category-nav__item--".concat(n,"\n          ")})}),Object(m.jsx)("h2",{className:"category-nav__title",children:c}),Object(m.jsx)("p",{className:"category-nav__models",children:"".concat(a," models")})]})}),W=function(){var e=Object(r.useState)({phones:0,tablets:0,accessories:0}),t=Object(b.a)(e,2),c=t[0],n=t[1];return Object(r.useEffect)((function(){var e=0,t=0,c=0;$().then((function(a){a.forEach((function(a){switch(a.type){case"phone":e+=1;break;case"tablet":t+=1;break;case"accessory":c+=1}n({phones:e,tablets:t,accessories:c})}))}))}),[]),Object(m.jsxs)("div",{className:"category-nav","data-cy":"categoryLinksContainer",children:[Object(m.jsx)(Q,{path:"/phones",type:"phones",name:"Phones",models:c.phones}),Object(m.jsx)(Q,{path:"/tablets",type:"tablets",name:"Tablets",models:c.tablets}),Object(m.jsx)(Q,{path:"/accessories",type:"accessories",name:"Accessories",models:c.phones})]})},H=(c(48),function(e){var t=e.title,c=e.products,n=Object(r.useState)(0),a=Object(b.a)(n,2),s=a[0],i=a[1],l=Object(r.useRef)(null);return Object(r.useEffect)((function(){l.current&&(l.current.style.translate="".concat(288*-s,"px"))}),[s]),Object(m.jsxs)("div",{className:"products-slider",children:[Object(m.jsxs)("div",{className:"products-slider__header",children:[Object(m.jsx)("h2",{className:"products-slider__title",children:t}),c.length>4&&Object(m.jsxs)("div",{className:"products-slider__buttons",children:[Object(m.jsx)("button",{className:u()("button","button--left",{"button--left_disabled":0===s,"button--disabled":0===s}),"aria-label":"leftBtn",type:"button",onClick:function(){i((function(e){return e-1}))},disabled:0===s}),Object(m.jsx)("button",{className:u()("button","button--right",{"button--right_disabled":s===c.length-4,"button--disabled":s===c.length-4}),"aria-label":"rightBtn",type:"button",onClick:function(){i((function(e){return e+1}))},disabled:s===c.length-4})]})]}),Object(m.jsx)("div",{"data-cy":"cardsContainer",className:"products-slider__slider",ref:l,children:c.map((function(e){return Object(m.jsx)(E,{product:e},e.id)}))})]})}),U=(c(49),[{id:1,url:"img/slider/Slider.jpg"},{id:2,url:"img/slider/Slider1.jpg"},{id:3,url:"img/slider/Slider2.jpg"},{id:4,url:"img/slider/Slider3.jpg"},{id:5,url:"img/slider/Slider4.jpg"},{id:6,url:"img/slider/Slider5.jpg"},{id:7,url:"img/slider/Slider6.jpg"},{id:8,url:"img/slider/Slider7.jpg"},{id:9,url:"img/slider/Slider8.jpg"},{id:10,url:"img/slider/Slider9.jpg"},{id:11,url:"img/slider/Slider10.jpg"},{id:12,url:"img/slider/Slider11.jpg"},{id:13,url:"img/slider/Slider12.jpg"}]),z=function(){var e=Object(r.useState)([U[U.length-1],U[0],U[1]]),t=Object(b.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(1),s=Object(b.a)(a,2),i=s[0],l=s[1],o=Object(r.useState)(!1),d=Object(b.a)(o,2),j=d[0],h=d[1],O=800,_=Object(r.useRef)(null),p=function(){if(_.current){var e=_.current.style;h(!0),e.transition="".concat(O,"ms all ease-in-out"),i===U.length?(l(1),e.left="".concat(-2080,"px"),setTimeout((function(){e.transitionDuration="",n([U[U.length-1],U[0],U[1]]),e.left="".concat(-1040,"px"),h(!1)}),O)):(l((function(e){return e+1})),e.left="".concat(-2080,"px"),setTimeout((function(){e.transitionDuration="",n([U[i-1]||U[0],U[i],U[i+1]||U[0]]),e.left="".concat(-1040,"px"),h(!1)}),O))}};return Object(r.useEffect)((function(){var e=setTimeout((function(){return p()}),5e3);return function(){clearTimeout(e)}}),[i]),Object(m.jsxs)("div",{className:"slider",children:[Object(m.jsxs)("div",{className:"slider__main",children:[Object(m.jsx)("button",{"aria-label":"leftBtn",type:"button",className:" button slider__button slider__button--left ",onClick:function(){return function(){if(_.current){h(!0);var e=_.current.style;e.transition="".concat(O,"ms all ease-in-out"),1===i?(l(U.length),e.left="0",setTimeout((function(){e.transitionDuration="",n([U[U.length-2],U[U.length-1],U[0]]),e.left="".concat(-1040,"px"),h(!1)}),O)):(l((function(e){return e-1})),e.left="0",setTimeout((function(){e.transitionDuration="",n([U[i-3]||U[U.length-1],U[i-2],U[i-1]]),e.left="".concat(-1040,"px"),h(!1)}),O))}}()},disabled:j}),Object(m.jsx)("div",{className:"slider__container",children:Object(m.jsx)("div",{className:"slider__images",ref:_,children:c.map((function(e){return Object(m.jsx)("img",{src:e.url,alt:"slider",className:"slider__image"},e.id)}))})}),Object(m.jsx)("button",{"aria-label":"rightBtn",type:"button",className:" button slider__button slider__button--right ",onClick:function(){return p()},disabled:j})]}),Object(m.jsx)("div",{className:"slider__dots",children:U.map((function(e){return Object(m.jsx)("div",{className:u()("slider__dot",{"slider__dot--active":e.id===i})},e.id)}))})]})},Y=function(){var e=Object(_.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w().then((function(e){return e.filter((function(e){return!e.discount}))})).then((function(e){return e.sort((function(e,t){return t.price-e.price}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(_.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w().then((function(e){return e.filter((function(e){return e.discount}))})).then((function(e){return e.sort((function(e,t){return t.price*(1-t.discount/100)-e.price*(1-e.discount/100)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)([]),s=Object(b.a)(a,2),i=s[0],l=s[1];return Object(r.useEffect)((function(){K().then(n),Y().then(l)}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("section",{className:"page__section",children:Object(m.jsx)(z,{})}),Object(m.jsx)("section",{className:"page__section",children:Object(m.jsx)(H,{title:"Hot prices",products:c})}),Object(m.jsx)("section",{className:"page__section",children:Object(m.jsx)(W,{})}),Object(m.jsx)("section",{className:"page__section",children:Object(m.jsx)(H,{title:"Brand new models",products:i})})]})},X=(c(50),function(){return Object(m.jsxs)("div",{className:"page__section not-found",children:[Object(m.jsx)("h1",{className:"page__title",children:"The page was not found..."}),Object(m.jsx)(s.b,{to:"/",className:"not-found__link",children:"Go home"})]})}),Z=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!1),s=Object(b.a)(a,2),i=s[0],l=s[1],o=Object(r.useState)(!1),u=Object(b.a)(o,2),d=u[0],j=u[1];Object(r.useEffect)((function(){j(!1),l(!0),w().then((function(e){return e.filter((function(e){return"phone"===e.type}))})).then(n).catch((function(){return j(!0)})).finally((function(){return l(!1)}))}),[]);var h=!i&&!d;return Object(m.jsxs)(m.Fragment,{children:[i&&Object(m.jsx)("div",{className:"page__loader-container",children:Object(m.jsx)(S,{})}),h&&Object(m.jsx)(q,{title:"Mobile phones",products:c})]})},ee=(c(51),function(){var e=Object(r.useContext)(x),t=Object(r.useContext)(h),c=Object(i.p)().productId,n=Object(r.useState)(!1),a=Object(b.a)(n,2),s=a[0],l=a[1],o=Object(r.useState)([]),d=Object(b.a)(o,2),O=d[0],_=d[1],p=Object(r.useState)([]),f=Object(b.a)(p,2),v=f[0],g=f[1],N=Object(r.useState)(),y=Object(b.a)(N,2),k=y[0],C=y[1],w=Object(r.useState)({currentPrice:null,oldPrice:null}),T=Object(b.a)(w,2),P=T[0],E=T[1],F=Object(r.useState)(),I=Object(b.a)(F,2),q=I[0],L=I[1],D=Object(r.useState)(""),J=Object(b.a)(D,2),M=J[0],G=J[1],Q=Object(r.useState)(""),W=Object(b.a)(Q,2),U=W[0],z=W[1],Y=Object(r.useState)(""),K=Object(b.a)(Y,2),V=K[0],X=K[1],Z=e.favs.some((function(e){return e===(null===k||void 0===k?void 0:k.id)})),ee=t.cart.some((function(e){return e.id===(null===k||void 0===k?void 0:k.id)})),te=Object(r.useState)(!1),ce=Object(b.a)(te,2),ne=ce[0],ae=ce[1];return Object(r.useEffect)((function(){c&&(ae(!1),l(!0),$().then((function(e){_(e),C(e.find((function(e){return e.id===c})))})).then((function(){return B(c)})).then((function(e){L(e),G(e.images[0])})).catch((function(){return ae(!0)})).finally((function(){return l(!1)})))}),[c]),Object(r.useEffect)((function(){var e=Object(j.a)(O).sort((function(){return Math.random()-.5}));g(e.slice(0,4))}),[O]),Object(r.useEffect)((function(){if(k){var e=k.price,t=k.discount;E({currentPrice:t?e-e*(t/100):e,oldPrice:t?e:null})}}),[k]),s?Object(m.jsx)(S,{}):Object(m.jsx)(m.Fragment,{children:ne?Object(m.jsx)("h1",{children:"The product was not found..."}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:" page__breadcrumbs page__breadcrumbs--product-details ",children:Object(m.jsx)(A,{})}),Object(m.jsx)("div",{className:"page__back-button",children:Object(m.jsx)(R,{})}),Object(m.jsxs)("div",{className:"page__section product-details",children:[Object(m.jsx)("h1",{className:" page__title page__title--product-details product-page__title ",children:null===q||void 0===q?void 0:q.name}),Object(m.jsxs)("div",{className:"product-details__content",children:[Object(m.jsx)("p",{className:"product-details__id small-text",children:"ID: 802390"}),Object(m.jsx)("div",{className:"product-details__thumbnails thumbnails",children:null===q||void 0===q?void 0:q.images.map((function(e){return Object(m.jsx)("button",{"aria-label":"thumbnailBtn",type:"button",className:"thumbnails__item",onClick:function(){return G(e)},children:Object(m.jsx)("img",{className:"thumbnails__image",src:e,alt:""})},e)}))}),Object(m.jsx)("div",{className:"product-details__image-container",children:Object(m.jsx)("img",{className:"product-details__image",src:M,alt:""})}),Object(m.jsxs)("div",{className:"product-details__options options",children:[Object(m.jsxs)("div",{className:"options__item",children:[Object(m.jsx)("p",{className:"options__title small-text",children:"Available colors"}),Object(m.jsx)("div",{className:"options__color-options colors",children:["beige","teal","graphite","eggwhite"].map((function(e){return Object(m.jsx)("button",{"aria-label":"colorSelBtn",type:"button",className:u()("color",{"color--active":e===U}),onClick:function(){return z(e)},children:Object(m.jsx)("div",{className:u()("color__option","color__option--".concat(e))})},"".concat(e))}))})]}),Object(m.jsx)("div",{className:"options__divider"}),Object(m.jsxs)("div",{className:"options__item",children:[Object(m.jsx)("p",{className:"options__title small-text",children:"Select capacity"}),Object(m.jsx)("div",{className:"options__capacity-options capacity",children:["64 GB","256 GB","512 GB"].map((function(e){return Object(m.jsx)("button",{"aria-label":"capacityOption",type:"button",className:u()("capacity__option",{"capacity__option--selected":V===e}),onClick:function(){return X(e)},children:e},e)}))})]}),Object(m.jsx)("div",{className:"options__divider"}),Object(m.jsxs)("div",{className:"options__item price",children:[Object(m.jsx)("div",{className:"price__item--current",children:"$".concat(null===P||void 0===P?void 0:P.currentPrice)}),P.oldPrice&&Object(m.jsx)("div",{className:"price__item--old",children:"$".concat(P.oldPrice)})]}),Object(m.jsxs)("div",{className:"options__item buttons",children:[Object(m.jsx)("button",{"aria-label":"handleCartBtn",type:"button",className:u()("buttons__button","buttons__button--cart",{"buttons__button--cart_added":ee}),onClick:function(){k&&t.handleCart(k)},children:"Add".concat(ee?"ed":""," to cart")}),Object(m.jsx)("button",{"aria-label":"addToFavBtn","data-cy":"addToFavorite",type:"button",className:u()("buttons__button","buttons__button--fav",{"buttons__button--fav_added":Z}),onClick:function(){k&&e.handleFavs(k.id)}})]}),Object(m.jsxs)("div",{className:"options__item features",children:[Object(m.jsxs)("div",{className:"features__item",children:[Object(m.jsx)("p",{className:"features__name small-text",children:"Screen"}),Object(m.jsx)("p",{className:"features__value small-text",children:(null===q||void 0===q?void 0:q.display.screenSize)||"-"})]}),Object(m.jsxs)("div",{className:"features__item",children:[Object(m.jsx)("p",{className:"features__name small-text",children:"Resolution"}),Object(m.jsx)("p",{className:"features__value small-text",children:(null===q||void 0===q?void 0:q.display.screenResolution)||"-"})]}),Object(m.jsxs)("div",{className:"features__item",children:[Object(m.jsx)("p",{className:"features__name small-text",children:"Processor"}),Object(m.jsx)("p",{className:"features__value small-text",children:(null===q||void 0===q?void 0:q.hardware.cpu)||"-"})]}),Object(m.jsxs)("div",{className:"features__item",children:[Object(m.jsx)("p",{className:"features__name small-text",children:"RAM"}),Object(m.jsx)("p",{className:"features__value small-text",children:(null===q||void 0===q?void 0:q.storage.ram)||"-"})]})]})]})]})]}),Object(m.jsx)("div",{className:"page__section",children:Object(m.jsxs)("div",{className:"product-info",children:[Object(m.jsxs)("div",{className:"product-info__about","data-cy":"productDescription",children:[Object(m.jsx)("h2",{className:"product-info__title",children:"About"}),Object(m.jsx)("div",{className:"product-info__divider"}),Object(m.jsx)("p",{className:"product-info__description medium-text",children:null===q||void 0===q?void 0:q.description})]}),Object(m.jsxs)("div",{className:"product-info__tech-specs tech-specs",children:[Object(m.jsx)("h2",{className:"tech-specs__title",children:"Tech specs"}),Object(m.jsx)("div",{className:"tech-specs__divider"}),Object(m.jsxs)("div",{className:"tech-specs__content",children:[Object(m.jsxs)("div",{className:"tech-specs__item medium-text",children:[Object(m.jsx)("div",{className:"tech-specs__name",children:"Screen"}),Object(m.jsx)("div",{className:"tech-specs__value",children:(null===q||void 0===q?void 0:q.display.screenSize)||"-"})]}),Object(m.jsxs)("div",{className:"tech-specs__item medium-text",children:[Object(m.jsx)("div",{className:"tech-specs__name",children:"Resolution"}),Object(m.jsx)("div",{className:"tech-specs__value",children:(null===q||void 0===q?void 0:q.display.screenResolution)||"-"})]}),Object(m.jsxs)("div",{className:"tech-specs__item medium-text",children:[Object(m.jsx)("div",{className:"tech-specs__name",children:"Processor"}),Object(m.jsx)("div",{className:"tech-specs__value",children:(null===q||void 0===q?void 0:q.hardware.cpu)||"-"})]}),Object(m.jsxs)("div",{className:"tech-specs__item medium-text",children:[Object(m.jsx)("div",{className:"tech-specs__name",children:"RAM"}),Object(m.jsx)("div",{className:"tech-specs__value",children:(null===q||void 0===q?void 0:q.storage.ram)||"-"})]}),Object(m.jsxs)("div",{className:"tech-specs__item medium-text",children:[Object(m.jsx)("div",{className:"tech-specs__name",children:"Built-in memory"}),Object(m.jsx)("div",{className:"tech-specs__value",children:(null===q||void 0===q?void 0:q.storage.flash)||"-"})]}),Object(m.jsxs)("div",{className:"tech-specs__item medium-text",children:[Object(m.jsx)("div",{className:"tech-specs__name",children:"Camera"}),Object(m.jsx)("div",{className:"tech-specs__value",children:(null===q||void 0===q?void 0:q.camera.primary)||"-"})]}),Object(m.jsxs)("div",{className:"tech-specs__item medium-text",children:[Object(m.jsx)("div",{className:"tech-specs__name",children:"Wi-Fi"}),Object(m.jsx)("div",{className:"tech-specs__value",children:(null===q||void 0===q?void 0:q.connectivity.wifi)||"-"})]}),Object(m.jsxs)("div",{className:"tech-specs__item medium-text",children:[Object(m.jsx)("div",{className:"tech-specs__name",children:"OS"}),Object(m.jsx)("div",{className:"tech-specs__value",children:(null===q||void 0===q?void 0:q.android.os)||"-"})]})]})]})]})}),Object(m.jsx)("div",{className:"page__section product-slider",children:v.length>0&&Object(m.jsx)(H,{title:"You may also like",products:v})})]})})}),te=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!1),s=Object(b.a)(a,2),i=s[0],l=s[1],o=Object(r.useState)(!1),u=Object(b.a)(o,2),d=u[0],j=u[1];Object(r.useEffect)((function(){j(!1),l(!0),w().then((function(e){return e.filter((function(e){return"tablet"===e.type}))})).then(n).catch((function(){return j(!0)})).finally((function(){l(!1)}))}),[]);var h=!i&&!d;return Object(m.jsxs)(m.Fragment,{children:[i&&Object(m.jsx)("div",{className:"page__loader-container",children:Object(m.jsx)(S,{})}),h&&Object(m.jsx)(q,{title:"Tablets",products:c})]})},ce=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(i.e,{children:Object(m.jsxs)(i.c,{path:"/",element:Object(m.jsx)(k,{}),children:[Object(m.jsx)(i.c,{index:!0,element:Object(m.jsx)(V,{})}),Object(m.jsx)(i.c,{path:"home",element:Object(m.jsx)(i.a,{to:"/"})}),Object(m.jsxs)(i.c,{path:"phones",children:[Object(m.jsx)(i.c,{index:!0,element:Object(m.jsx)(Z,{})}),Object(m.jsx)(i.c,{path:":productId",element:Object(m.jsx)(ee,{})})]}),Object(m.jsxs)(i.c,{path:"tablets",children:[Object(m.jsx)(i.c,{index:!0,element:Object(m.jsx)(te,{})}),Object(m.jsx)(i.c,{path:":productId",element:Object(m.jsx)(ee,{})})]}),Object(m.jsxs)(i.c,{path:"accessories",children:[Object(m.jsx)(i.c,{index:!0,element:Object(m.jsx)(L,{})}),Object(m.jsx)(i.c,{path:":productId",element:Object(m.jsx)(ee,{})})]}),Object(m.jsx)(i.c,{path:"favorites",element:Object(m.jsx)(G,{})}),Object(m.jsx)(i.c,{path:"cart",element:Object(m.jsx)(M,{})}),Object(m.jsx)(i.c,{path:"*",element:Object(m.jsx)(X,{})})]})})})};c(52);a.a.render(Object(m.jsx)(O,{children:Object(m.jsx)(v,{children:Object(m.jsx)(s.a,{children:Object(m.jsx)(ce,{})})})}),document.getElementById("root"))}]),[[53,1,2]]]);
//# sourceMappingURL=main.bc9631d1.chunk.js.map